# 用于生成旅游路线的定向越野问题算法
## 摘要
我们研究了一个有关于自动并且有效率为正在度假的游湖生成路线的问题。我们着力于一个常规的例子，这个例子中旅游的时长是大于一天的。之前有效的算法是基于贪婪算法，但是有遇到了两大问题。首先，这样生成的路线经常是没有均衡性的，例如一连几天游览最好的经典但紧接着是一些低质量的地点。其次，这样算法生成的路线经常会重复访问一些邻近地方只为了一些低吸引力的景点。我们对于这个问题最大的贡献就是研究了一个算法利用最大化最差一天的旅游质量来解决了以上两个问题。我们有理论上的结果来展示这个算法的竞争力因素在于对于这个问题的多个例子和想法都可以得到在单一的日子里获得最好的路线规划结果。我们利用两个独特的数据组来给出具体解决的问题解答。第一是用户利用谷歌的匿名历史访问数据以及Foursquare上公众的地点签到数据。我们展示了首先这个算法所产生的路线结果是最好的，虽然最无聊的一天比之前的算法给出的结果差2倍。然后我们用人们的投票结果来评估我们生成的路线，算法给出的结果仅仅比深入了解这块旅游目的地的旅游专家差一点点。

## 1 背景介绍
 Google只在于提供给用户需要的高质量的信息反馈数据。在旅行规划这个领域，整理关于一个特定的目的地的信息进入一个有用的表格，例如旅游的行程表是一个经常性的重要工作。我们已经开发并且发布了一个应用在许多Google的产品中可以完成这件事情的工具。在一种使用方法中，行程表已经在数百个城市上进行过预计算 ，这样就可以在用户搜索关于特定城市的旅程中展示给用户并且开始规划这个旅程。在另一种使用方法中，用户可以保存许多自己感兴趣并且将会在旅途中访问的旅行景点，这个产品会根据用户保存的点来生成这个旅途行程表。当然还有第三种设置，就是用户可以下载Google Trips这个应用程序将可以看到许多可以动态编辑的，通过实时再配置生成的符合用户需求的旅游行程表。在最后一种设置中，算法必须在甚至是在移动设备中，有效计算并且实时生成新的行程表。因此，用算法在众多的限制条件下高效的生成一个高质量的行程表对于Google来说就是一个重大的问题，并且需要我们继续探索和研究。
关于生成旅游行程表的问题是已经被研究过的，这个问题经常可以用被称作为**定向越野问题*的例子来进行一般化：给出一个有边权重和顶点值的图，找出旅行中最大化利益的线路。这两个问题的共同点很容易得到，比如，找出一个涵盖伦敦最好景点的10小时旅行，尽管最好这个定义是很主观并且复杂的。
无论如何，大多数的旅途是介于3到8天之间的，并且有些甚至更长。这个定向越野问题必须因此拓展来适应多天数的问题。这个拓展延伸看起来是无损的，但是实际上它会导致更多的问题。首先，这个问题拓展到多天数问题的时候，基础的贪心算法在算法观点上的最差情况可以得到一个好的结果，但是在用户体验上对于一个多日旅行并不是最好的。例如，旅程的第一天涵盖了很多好的有吸引力的旅行景点，然后接下来的每天访问比其前一天更加无聊的地方。更糟糕的是，经常会出现重复访问一些在同一条线路上的相邻好坏差距较大的景点。一些旅游者可能会被雇佣来重新安排这些天来得到一个更好的平衡性，并且减少重复的访问。但是我们的经验展示了，这些用来重新安排旅程的人经常对于调整生成地理跨度很大的人文景观之间的旅程而感到困难。
一个更好的方法是利用最大化最差一天的收益来取代在所有日子里获得最大收益这个想法来重新规划这个问题来使得旅程的所有日子更好。这样就会避免好坏差距很大的可能结果。，并且将会自然激励算法去花时间调整平衡一天之内在同一条路线上相邻的好坏景点，并且在新的一天去到一个新的区域。
 
![](%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/24784191-2B06-4346-970C-62D9E0A19A98.png)

![](%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/013522F5-CBAC-4809-BD26-4B7F2636C93B.png)

我们准备展示一个简单一天的绿城规划的例子来证明这个算法的竞争力的点不必其他任何算法的竞争力点来的更差。一般来说，就像我们展示的这样，给出一个算法可以有α的相似度，那么我们的算法就可以得到α+2相似度来最大化我们最差一天的值。这个模型通过包含最简单的无向图定向越野并且对取得点的值无限制，以及有着定向越野的最后期限，或者一般来说就是结点的时间窗口和有向图的扩展来覆盖所有需要解决的问题。
为了解决这个有最后期限的限制，当贪婪算法将会在一些最差数据中表现的更好，但这并不保证用户可以对这个结果感到满意。我们通过一些扩展的观察来证明性能上可以见证我们的算法并且可以作为一些随机数据的基准。我们的分析选出了两种基准作为测量两种算法的基准。第一个是通过以下这几个客观数据来测量：访问点的数量，参观这些点所得到的收益等等。我们同时增加了第二个个人主观的测量依据，我们雇佣了很多评分者来实地考察不一样算法给出的路线规划。我们的实验分析展现了我们的获得最大化收益的定向越野算法算出的多天旅程规划可以使得最差的那一天也可以有着很好的体验。在人工评分上，我们的算法在旅游专家那里得到了更高的分数。

## 2 相关的研究成果
在算法上，定向越野问题是一个有关于单一城市内旅程规划很好的模型。在这个模型中，目标是为了最大化奖励通过指定起点和终点以及指定最多可以承受的旅程的长度来访问图中的结点。最被广泛熟知的算法是通过时间窗口来得出结果，这个研究在参考资料【7】中给出。这个算法通过两个将来自【6】中k-路径算法作为子程序的动态程序解决的定向越野问题的【2】和【1】的研究后得出的结果。在k-路径问题中，目标是为了最小化访问最少k个结点的路消耗。在循环中，【6】中的工作依靠一个为了k-MST【15】的重要多数值算法，k-MST是一个构建一个k结点的最小生成树的问题。这个算法是对于一个无向图并且没有时间窗口有着2+ε 相似度，同时这个算法对于一个线性相似度的模型也适用。我们讨论了最知名对于定向越野算法模型的相似度的影响点，详细将记述在3中。一个不一样的对于无向图，无时间窗口的定向越野问题的解决方法是最近有Friggstad何Swamy【14】给出的。他们的想法是创建一个线性的程序来编码定向月月并且用一个循环算法来解决问题。这是一个最佳情况下3近似的算法。在一个多旅程的定向越野中，【2】的工作展示了一个简单贪婪算法并且利用单一日程的规划算法作为子程序并且得到了一个横跨几天的总奖励数，这个数值已经是近乎无损并且相似因子已经十分接近于一个单一日子的例子。这个对于次模块的扩展在【8】中已经被研究，这是一个被描述为对数相似因子的算法。
直到我们开始关注这个问题，已经有众多解决旅行规划问题的方法和假设。在【3.16.17，29】中的作者都已经展示了通过启发法和算法上来获得的对于这个问题的理解和调查。【9】中的成果是最近接近于我们的成果的。这些作者多数关注于基于社交媒体，例如Flickr照片所得到的数据来生成旅游景点的行程单。他们同样将这个问题模式化成一个定向越野问题并且利用照片的数据集在来抽象点的流行度，一个景点的吸引力以及两个不同景点之间的通勤时间这三个数据。我们现在解释我们和【9】中成果的主要区别。首先，我们的成果基于一个不同的数据集，比如，【9】看来是从Flickr数据中抽象出将景点的访问数，景点之间的距离以及访问的时间，但是我们的数据集已经包括这些数据。其次，【9】的作者主要关注了单一天的行程，但是我们主要关注了多日期的行程。我们设想了一个多日期定向越野问题的扩展问题。我们展示了原始算法计算出的结果以及将其对世界范围内的城市做了测量。
另一些有趣的在这个问题上的论文包括了【34】，这个作者利用了GPS数据来构建行程建议引擎，并且用北京作为了使用的例子。【26】，主要关注了在城市中建议路线同样给出一些设施的建议给使用者去最近的源点开始的路径，同样，多个终点利用了社交媒体上的地点表现，例如【4，21，24，25，30，32，33，35】，以及在个人信息的基础上的，例如【5，11，12，18-20，22，23，27，28】。一个最有趣的相关成果是【31】，作者研究了这个问题从一个游戏理论的角度。在一个旅行者的应用中。他们设想一个例如在旅行的路线上从一个点到另一个点有着一个众多旅行者访问的大型娱乐公园，这对于访问其他景点有着正面的效果。这个【31】的客观成果对于这个问题有着很好的结果。

## 3 定向越野模型和准备工作